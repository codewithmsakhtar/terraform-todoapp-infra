name : terraform todoinfra
on : 
 workflow_dispatch :
permissions:
  contents : read
  id_token : write

jobs:
  terraform_initplanvalidate :
    
runs-on : mydellleptop

defaults :
  run :
    working-directory : environments/dev

  steps:
  - name: Checkout repository
    uses: actions/checkout@v4

  
    - name: Azure Login
      uses: azure/login@v2
      with:
        client-id: ${{ secrets.AZURE_CLIENT_ID }}
        tenant-id: ${{ secrets.AZURE_TENANT_ID }}
        subscription-id: ${{ secrets.AZURE_SUBSCRIPTION_ID }}  

    - name: Terraform Init
      run: terraform init

    - name: Terraform Format
      run: terraform fmt -check -recursive

   - name: Terraform Validate
     run: terraform validate 

    - name: Terraform Plan
      run: terraform plan

    

      
 
  

